---
title: "Use buildTM() to Begin Writing Your Report"
date: "`r format(Sys.Date(), format='%B %d %Y') `"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{A_use-buildTM}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  message = FALSE, echo = TRUE, warning = FALSE,
  collapse = TRUE,
  comment = "#>"
)
options(rmarkdown.html_vignette.check_title = FALSE)

```

```{r setup}
library(NMFSReports)
library(here)
```


# Create initial structure of report

Do everyone here a favor and create a new r project or at least set up a working directory (`setwd()`). There will be a lot of file management here...

To build your intitial architecture for your new NOAA Tech Memo or Report, simply run the below script: 

## title

Default = "". Here, put the title of your report. You can change this later in the run file in needed.

```{r}
title = "My Awesome Report!"
```

## author

Here, add your First Lastname of everyone who is producing the report. You can change this later in the run file in needed.

```{r}
authors = "Me, Myself, and I"
```

## sections

Let's first think about what you want/need your Tech Memo to look like. For my purposes, I'll assume that you need the below sections:

```{r}
  # list the sections (that you will have different rmd scripts for) in order and with no spaces
sections <- c("frontmatter", # This is a specific template that matches the NOAA Template
               "abstract", # This, and all others unless otherwise mentioned, come from the same plain-slate document but are appropriately named and linked up in the 'run' file. 
               "introduction", 
               "methods", 
               "results", 
               "discussion", 
               "endmatter" # This is a specific template that will document all of your citations throughout the report, the R packages you used to create this report. I'm biased, but please give credit where credit is due! There are also spots here to list people's ORCID numbers and acknowlegements. 
              ) 
```

## support_scripts

And to make sure we nice and neatly compartemantalize our work, I'm going to create the below supporting .R files that I will source into my 'run' file:

```{r}
support_scripts <-
    c(# note a 'run' file is automatically created. Think of this as the spine of your document. 
      "functions", # where I will save all report-specific functions
      "dataDL", # Where we will download the data (e.g., from Oracle or an API). You may only want to run this every so often or regularly, up to you
      "data" # Where I will load that data kept locally that was either downloaded in "dataDL" or created locally
)
```

## styles_reference_docx

`styles_reference_docx` is a document style reference guide is essentially a word document where you have defined each style. Either use a local document (insert "path") or some of the pre-made templates ("refdoc_noaa_tech_memo" or "refdoc_fisheries_economics_of_the_us"). Default = "refdoc_noaa_tech_memo"

To edit the stlyes in your word document, check out this [resource](https://support.microsoft.com/en-us/office/customize-or-create-new-styles-d38d6e47-f6fc-48eb-a607-1eb120dec563). 

Here's what they look like: 

### refdoc_noaa_tech_memo

![refdoc_noaa_tech_memo](../man/figures/refdoc_noaa_tech_memo.JPG)

### refdoc_fisheries_economics_of_the_us

![refdoc_fisheries_economics_of_the_us](../man/figures/refdoc_fisheries_economics_of_the_us.JPG)

## styles_reference_pptx

`styles_reference_pptx` is a document style reference guide is essentially a word document where you have defined each style. Either use NULL to not have a presentation, a local document (insert full path to local document), or a pre-made templates ("refppt_nmfs"). Default = "refppt_nmfs". You can change this later by renaming the file in the code folder. 

Here's what they look like: 

### refppt_nmfs

<!-- ![refppt_nmfs](../man/figures/refppt_nmfs.JPG) -->

## csl

`csl` is a citation style. Either use a local document (insert "path") or some of the pre-made templates ("apa"). Default = "apa" because it was easy to find. 

```{r}
csl = "apa"

# it looks something like this:
apa <- base::readLines(system.file("cit","apa.csl", package="NMFSReports"))
head(apa)
```

## bibliography.bib

`bibliography.bib`: Either use a local document (.bib format; insert full "path") or the example file from the package ("bib_example"). Default = "bib_example".

```{r}
csl = "bib_example"

# it looks something like this:
bib <- base::readLines(system.file("rmd","bib_example.bib", package="NMFSReports"))
bib
```


# Create Report Outline

Now, magic! Now for the sake of the vignette, I can't actually run it here, but below is a picture of what this looks like:

```{r, eval = FALSE}
buildTM(
        sections = sections,
        support_scripts = support_scripts,
        authors = authors,
        title = title,
        styles_reference_pptx = styles_reference_pptx,
        styles_reference_docx = styles_reference_docx,
        bibliography.bib = bibliography.bib,
        csl = csl
)
```

![buildTM() output](../man/figures/buildTM.JPG)


